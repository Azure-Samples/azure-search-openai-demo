<h1 id="rag-chat-deploying-on-azure-app-service">RAG chat: Deploying on
Azure App Service</h1>
<p>Due to <a href="https://github.com/Azure/azure-dev/issues/2736">a
limitation</a> of the Azure Developer CLI (<code>azd</code>), there can
be only one host option in the <a href="../azure.yaml">azure.yaml</a>
file. By default, <code>host: containerapp</code> is used and
<code>host: appservice</code> is commented out.</p>
<p>To deploy to Azure App Service, please follow the following
steps:</p>
<ol type="1">
<li><p>Comment out <code>host: containerapp</code> and uncomment
<code>host: appservice</code> in the <a
href="../azure.yaml">azure.yaml</a> file.</p></li>
<li><p>Login to your Azure account:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">azd</span> auth login</span></code></pre></div></li>
<li><p>Create a new <code>azd</code> environment to store the deployment
parameters:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">azd</span> env new</span></code></pre></div>
<p>Enter a name that will be used for the resource group. This will
create a new folder in the <code>.azure</code> folder, and set it as the
active environment for any calls to <code>azd</code> going
forward.</p></li>
<li><p>Set the deployment target to <code>appservice</code>:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">azd</span> env set DEPLOYMENT_TARGET appservice</span></code></pre></div></li>
<li><p>(Optional) This is the point where you can customize the
deployment by setting other <code>azd</code> environment variables, in
order to <a href="deploy_existing.md">use existing resources</a>, <a
href="deploy_features.md">enable optional features (such as auth or
vision)</a>, or <a href="deploy_lowcost.md">deploy to free
tiers</a>.</p></li>
<li><p>Provision the resources and deploy the code:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">azd</span> up</span></code></pre></div>
<p>This will provision Azure resources and deploy this sample to those
resources, including building the search index based on the files found
in the <code>./data</code> folder.</p>
<p><strong>Important</strong>: Beware that the resources created by this
command will incur immediate costs, primarily from the AI Search
resource. These resources may accrue costs even if you interrupt the
command before it is fully executed. You can run <code>azd down</code>
or delete the resources manually to avoid unnecessary spending.</p></li>
</ol>
