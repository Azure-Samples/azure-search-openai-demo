---
name: Rewrite RAG query
description: Suggest the optimal search query based on the user's query, examples, and chat history.
model:
    api: chat
    parameters:
        tools: ${file:chat_query_rewrite_tools.json}
sample:
    user_query: Does it include hearing?
    past_messages:
        - role: user
          content: "What is included in my Northwind Health Plus plan that is not in standard?"
        - role: assistant
          content: "The Northwind Health Plus plan includes coverage for emergency services, mental health and substance abuse coverage, and out-of-network services, which are not included in the Northwind Standard plan. [Benefit_Options.pdf#page=3]"
---
system:
Below is a history of the conversation so far, and a new question asked by the user about the azure-search-openai-demo open source project.
You have access to an Azure AI Search index with the documentation or to the GitHub issue tracker for the project documentation.

Based on the conversation and the new question, suggest the optimal search query for the AI Search index or GitHub issue tracker.
If the question is not in English, translate the question to English before generating the search query.

If you cannot generate a search query for either AI Search or GitHub, return just the number 0.
If you think that it would help to search both, then recommend both functions be called.

{% for message in past_messages %}
{{ message["role"] }}:
{{ message["content"] }}
{% endfor %}

user:
{{ user_query }}
